(this["webpackJsonpcrud-page"]=this["webpackJsonpcrud-page"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(8),a=n.n(r),i=(n(14),n(3)),o=n(9),u=n(2),d=(n(15),"https://yourtestapi.com/api/posts"),j=(n(16),n(17),n(18),n(6)),l=n.n(j),p=n(0),b=function(e){var t=e.clickHandler,n=e.text,c=e.isWhite,s=e.isSubmit;return Object(p.jsx)("button",{className:l()("Button",{"Button--white":c}),type:s?"submit":"button",onClick:t,children:n})},O=(n(20),function(e){var t=e.hidePopUp,n=e.itWasError,c="Success!";return n&&(c="Oops, something went wrong!"),Object(p.jsxs)("div",{className:"ResultMessage",children:[Object(p.jsx)("p",{className:l()("ResultMessage__text",{"ResultMessage__text--error":n}),children:c}),Object(p.jsx)(b,{text:"close",clickHandler:t})]})}),h=function(e){var t=e.addPost,n=e.hidePopUp,s=Object(c.useState)(""),r=Object(u.a)(s,2),a=r[0],i=r[1],o=Object(c.useState)(""),j=Object(u.a)(o,2),l=j[0],h=j[1],x=Object(c.useState)(""),f=Object(u.a)(x,2),m=f[0],v=f[1],P=Object(c.useState)(""),g=Object(u.a)(P,2),_=g[0],S=g[1],N=Object(c.useState)(!1),y=Object(u.a)(N,2),U=y[0],C=y[1],E=Object(c.useState)(!1),k=Object(u.a)(E,2),D=k[0],H=k[1],A={title:a,text:l,image:m,url:_},w=function(e,n){var c;e.preventDefault(),(c=n,fetch("".concat(d),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(c)}).then((function(e){return e.json()}))).then((function(e){t(e),H(!0)})).catch((function(){C(!0)})),i(""),h(""),v(""),S("")};return Object(p.jsxs)("form",{className:"AddPostForm",onSubmit:function(e){w(e,A)},children:[U||D||Object(p.jsxs)("div",{className:"AddPostForm__content",children:[Object(p.jsx)("h2",{className:"AddPostForm__heading",children:"Add new post"}),Object(p.jsx)("input",{className:"AddPostForm__input",type:"text",value:a,onChange:function(e){i(e.target.value)},placeholder:"enter english name",required:!0}),Object(p.jsx)("input",{className:"AddPostForm__input",type:"text",value:l,onChange:function(e){h(e.target.value)},placeholder:"enter latin name",required:!0}),Object(p.jsx)("input",{className:"AddPostForm__input",type:"text",value:m,onChange:function(e){v(e.target.value)},placeholder:"add image url",required:!0}),Object(p.jsx)("input",{className:"AddPostForm__input",type:"text",value:_,onChange:function(e){S(e.target.value)},placeholder:"add article url",required:!0}),Object(p.jsxs)("div",{className:"AddPostForm__buttons",children:[Object(p.jsx)(b,{text:"add post",isSubmit:!0}),Object(p.jsx)(b,{text:"cancel",clickHandler:n,isWhite:!0})]})]}),U&&Object(p.jsx)(O,{hidePopUp:n,itWasError:U}),D&&Object(p.jsx)(O,{hidePopUp:n,itWasError:U})]})},x=(n(21),function(e){var t=e.hidePopUp;return Object(p.jsx)("div",{className:"PopUpOverlay",onClick:t})}),f=function(e){var t=e.setAddPopUpIsShown,n=e.addPost,c=function(){t(!1)};return Object(p.jsxs)("div",{className:"AddPost",children:[Object(p.jsx)(x,{hidePopUp:c}),Object(p.jsx)(h,{addPost:n,hidePopUp:c})]})},m=(n(22),function(e){var t=e.addPopUpToggler;return Object(p.jsx)("div",{className:"AddPostButton",children:Object(p.jsx)(b,{text:"create new post",clickHandler:t})})}),v=(n(23),n(24),function(e){var t=e.isReverse,n=e.query,c=e.setSortBy,s=e.reverse,r=e.setQuery,a=e.resetSort;return Object(p.jsxs)("div",{className:"SearchAndSort",children:[Object(p.jsx)("input",{className:"SearchAndSort__input",type:"text",value:n,placeholder:"search...",onChange:function(e){r(e.target.value)}}),Object(p.jsxs)("select",{className:"SearchAndSort__select",onChange:function(e){c(e.target.value)},children:[Object(p.jsx)("option",{value:"title",children:"english name"}),Object(p.jsx)("option",{value:"text",children:"latin name"}),Object(p.jsx)("option",{value:"order",children:"order"}),Object(p.jsx)("option",{value:"updated",children:"updated"})]}),Object(p.jsx)(b,{text:t?"v":"^",clickHandler:s,isWhite:!0}),Object(p.jsx)(b,{text:"reset",isWhite:!0,clickHandler:a})]})}),P=function(e){var t=e.modeToggler,n=e.isInEditMode,c=e.isReversed,s=e.query,r=e.setSortBy,a=e.reverse,i=e.setQuery,o=e.resetSort;return Object(p.jsxs)("header",{className:"Header",children:[Object(p.jsx)("h1",{className:"Header__heading",children:"CRUD"}),Object(p.jsx)(v,{isReverse:c,query:s,setSortBy:r,reverse:a,setQuery:i,resetSort:o}),Object(p.jsx)(b,{text:n?"exit edit mode":"enter edit mode",clickHandler:t})]})},g=(n(25),n(26),n(27),n(28),function(e){var t=e.popUpDisplayHandler,n=e.postId,s=e.setPosts,r=Object(c.useState)(!1),a=Object(u.a)(r,2),i=a[0],o=a[1],j=Object(c.useState)(!1),l=Object(u.a)(j,2),h=l[0],f=l[1],m=function(){t(!1)},v=function(e){(function(e){return fetch("".concat(d,"/").concat(e),{method:"DELETE"})})(e).then((function(){s((function(e){return e.filter((function(e){return e.id!==n}))})),f(!0)})).catch((function(){o(!0)}))};return Object(p.jsxs)("div",{className:"ConfirmPopUp",children:[Object(p.jsx)(x,{hidePopUp:m}),Object(p.jsxs)("div",{className:"ConfirmPopUp__content",children:[i||h||Object(p.jsxs)("div",{className:"ConfirmPopUp__interface",children:[Object(p.jsx)("p",{className:"ConfirmPopUp__text",children:"Are you sure?"}),Object(p.jsxs)("div",{className:"ConfirmPopUp__buttons",children:[Object(p.jsx)(b,{clickHandler:function(){v(n)},text:"yes",isWhite:!0}),Object(p.jsx)(b,{clickHandler:m,text:"no"})]})]}),i&&Object(p.jsx)(O,{hidePopUp:m,itWasError:i}),h&&Object(p.jsx)(O,{hidePopUp:m,itWasError:i})]})]})}),_=function(e){var t=e.popUpDisplayHandler,n=e.postData,s=e.setPosts,r=Object(c.useState)(n.title),a=Object(u.a)(r,2),o=a[0],j=a[1],l=Object(c.useState)(n.text),h=Object(u.a)(l,2),f=h[0],m=h[1],v=Object(c.useState)(n.image),P=Object(u.a)(v,2),g=P[0],_=P[1],S=Object(c.useState)(n.url),N=Object(u.a)(S,2),y=N[0],U=N[1],C=Object(c.useState)(!1),E=Object(u.a)(C,2),k=E[0],D=E[1],H=Object(c.useState)(!1),A=Object(u.a)(H,2),w=A[0],F=A[1],T={title:o,text:f,image:g,url:y},W=function(){t(!1)},q=function(e){var t,c;e.preventDefault(),(t=T,c=n.id,fetch("".concat(d,"/").concat(c),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){return e.json()}))).then((function(e){s((function(t){return function(e,t){return e.map((function(e){return e.id===t.id?Object(i.a)(Object(i.a)({},e),t):e}))}(t,e)})),F(!0)})).catch((function(){D(!0)}))};return Object(p.jsxs)("div",{className:"EditPopUp",children:[Object(p.jsx)(x,{hidePopUp:W}),Object(p.jsxs)("form",{className:"EditPopUp__form",onSubmit:function(e){q(e)},children:[k||w||Object(p.jsxs)("div",{className:"EditPopUp__interface",children:[Object(p.jsx)("input",{type:"text",value:o,onChange:function(e){j(e.target.value)},placeholder:"enter english name",required:!0}),Object(p.jsx)("input",{className:"EditPopUp__input",type:"text",value:f,onChange:function(e){m(e.target.value)},placeholder:"enter latin name",required:!0}),Object(p.jsx)("input",{className:"EditPopUp__input",type:"text",value:g,onChange:function(e){_(e.target.value)},placeholder:"add image url",required:!0}),Object(p.jsx)("input",{className:"EditPopUp__input",type:"text",value:y,onChange:function(e){U(e.target.value)},placeholder:"add article url",required:!0}),Object(p.jsx)(b,{text:"submit",isSubmit:!0}),Object(p.jsx)(b,{text:"cancel",clickHandler:W})]}),k&&Object(p.jsx)(O,{hidePopUp:W,itWasError:k}),w&&Object(p.jsx)(O,{hidePopUp:W,itWasError:k})]})]})},S=function(e){var t=e.postData,n=e.setPosts,s=Object(c.useState)(!1),r=Object(u.a)(s,2),a=r[0],i=r[1],o=Object(c.useState)(!1),d=Object(u.a)(o,2),j=d[0],l=d[1];return Object(p.jsxs)("div",{className:"EditOrDelete",children:[Object(p.jsx)(b,{text:"edit",clickHandler:function(){l(!0)}}),Object(p.jsx)(b,{text:"delete",isWhite:!0,clickHandler:function(){i(!0)}}),a&&Object(p.jsx)(g,{popUpDisplayHandler:i,postId:t.id,setPosts:n}),j&&Object(p.jsx)(_,{postData:t,popUpDisplayHandler:l,setPosts:n})]})},N=function(e){var t=e.postData,n=e.isInEditMode,c=e.setPosts;return Object(p.jsxs)("div",{className:"PostCard",children:[Object(p.jsx)("h2",{className:"PostCard__heading",children:t.title}),Object(p.jsx)("p",{className:"PostCard__latin-name",children:t.text}),Object(p.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:Object(p.jsx)("img",{className:"PostCard__image",src:t.image,alt:t.title})}),n&&Object(p.jsx)(S,{postData:t,setPosts:c})]})},y=function(e){var t=e.posts,n=e.isInEditMode,c=e.setPosts;return Object(p.jsx)("ul",{className:"ListOfPosts",children:t.map((function(e){return 1===e.active&&Object(p.jsx)("li",{className:"ListOfPosts__item",children:Object(p.jsx)(N,{isInEditMode:n,postData:e,setPosts:c})},e.id)}))})};var U=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(u.a)(r,2),j=a[0],l=a[1],b=Object(c.useState)(!1),O=Object(u.a)(b,2),h=O[0],x=O[1],v=Object(c.useState)(""),g=Object(u.a)(v,2),_=g[0],S=g[1],N=Object(c.useState)(!1),U=Object(u.a)(N,2),C=U[0],E=U[1],k=Object(c.useState)(""),D=Object(u.a)(k,2),H=D[0],A=D[1],w=n.filter((function(e){return e.title.toLowerCase().includes(H.toLowerCase())||e.text.toLowerCase().includes(H.toLowerCase())}));w.sort((function(e,t){switch(_){case"title":return e.title.localeCompare(t.title);case"text":return e.text.localeCompare(t.text);case"order":return e.sort_order&&t.sort_order?e.sort_order-t.sort_order:e.sort_order?-1:t.sort_order?1:-1;case"updated":return new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime();default:return 0}})),C&&w.reverse();var F=function(){fetch("".concat(d)).then((function(e){return e.ok?e.json():Promise.reject()})).then((function(e){s(e)}))};return Object(c.useEffect)((function(){F()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P,{modeToggler:function(){x((function(e){return!e}))},isInEditMode:h,isReversed:C,query:H,setSortBy:S,reverse:function(){E((function(e){return!e}))},setQuery:A,resetSort:function(){S(""),E(!1),A("")}}),Object(p.jsxs)("main",{children:[Object(p.jsx)(y,{posts:w,isInEditMode:h,setPosts:s}),h&&Object(p.jsx)(m,{addPopUpToggler:function(){l((function(e){return!e}))}}),j&&Object(p.jsx)(f,{setAddPopUpIsShown:l,addPost:function(e){s((function(t){return[].concat(Object(o.a)(t),[Object(i.a)(Object(i.a)({},e),{},{active:1})])}))}})]})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(U,{})}),document.getElementById("root")),C()}],[[29,1,2]]]);
//# sourceMappingURL=main.cec41256.chunk.js.map